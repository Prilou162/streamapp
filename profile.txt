<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Streamer profile ‚Äì STREAMLATAM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- ICONS -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
  />

  <style>
    :root {
      --bg: #05060a;
      --bg-elevated: #080816;
      --bg-card: #101222;
      --bg-soft: #181a2f;
      --border-soft: #1f213a;
      --border-subtle: #141626;
      --text-main: #f4f4fb;
      --text-soft: #9c9fc2;
      --text-muted: #7a7ea5;
      --accent: #5b4bff;
      --accent-soft: #7b6bff;
      --success: #5bff94;
      --danger: #ff5b7d;
      --warning: #ffc857;

      --radius-lg: 20px;
      --radius-md: 14px;
      --shadow-soft: 0 18px 45px rgba(0,0,0,0.65);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: system-ui, Inter, sans-serif;
    }

    html { scroll-behavior: smooth; }

    body {
      background:
        radial-gradient(circle at top left, rgba(91,75,255,0.2), transparent 55%),
        radial-gradient(circle at bottom right, rgba(91,255,148,0.12), transparent 55%),
        linear-gradient(140deg, #05060a, #05050d 40%, #05060a);
      color: var(--text-main);
    }

    .app-shell {
      display: flex;
      min-height: 100vh;
    }

    /* SIDEBAR (aligned with the rest) */
    .sidebar {
      width: 260px;
      background:
        radial-gradient(circle at top, rgba(91,75,255,0.25), transparent 60%),
        #05050b;
      border-right: 1px solid var(--border-subtle);
      padding: 22px 18px;
      display: flex;
      flex-direction: column;
      gap: 30px;
      position: sticky;
      top: 0;
      height: 100vh;
    }

    .sidebar-logo {
      font-size: 19px;
      font-weight: 600;
      letter-spacing: .12em;
    }
    .sidebar-logo span { color: var(--accent-soft); }

    .sidebar-section-title {
      font-size: 11px;
      letter-spacing: .1em;
      text-transform: uppercase;
      color: #63678a;
      margin-bottom: 6px;
    }

    .sidebar-nav { display: flex; flex-direction: column; gap: 4px; }

    .nav-item {
      padding: 9px 12px;
      border-radius: 12px;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--text-soft);
      cursor: pointer;
      transition: .15s;
      position: relative;
    }

    .nav-item a {
      color: inherit;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 10px;
      width: 100%;
    }

    .nav-item:hover {
      background: #181a2e;
      color: #fff;
      transform: translateY(-1px);
    }

    .nav-item.active {
      background:
        radial-gradient(circle at top left, rgba(91,75,255,.38), transparent 60%),
        #16182d;
      box-shadow: 0 12px 32px rgba(0,0,0,.55);
      color: #fff;
    }

    /* MAIN AREA */
    .main-area {
      flex: 1;
      min-width: 0;
    }

    /* TOPBAR (aligned with dashboard/campaigns/applications) */
    .topbar {
      padding: 14px 22px;
      border-bottom: 1px solid var(--border-subtle);
      background:
        radial-gradient(circle at top left, rgba(91,75,255,0.3), transparent 60%),
        rgba(5,5,12,0.92);
      backdrop-filter: blur(12px);
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky; top: 0; z-index: 10;
      gap: 12px;
    }

    .topbar-left {
      display: flex;
      align-items: center;
      gap: 10px;
      min-width: 0;
    }

    .avatar-circle-lg {
      width: 34px;
      height: 34px;
      border-radius: 999px;
      background:
        conic-gradient(from 210deg, #5b4bff, #5bff94, #ffc857, #ff5b7d, #5b4bff);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 16px;
      color: #fff;
      box-shadow: 0 0 18px rgba(0,0,0,0.6);
      flex-shrink: 0;
    }

    .topbar-title { font-size: 17px; font-weight: 600; }
    .topbar-sub { font-size: 12px; color: var(--text-soft); }

    .topbar-right {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: flex-end;
      text-align: right;
    }

    .pill-small {
      padding: 3px 8px;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      background: #141529;
      font-size: 11px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: var(--text-soft);
      white-space: nowrap;
    }

    .pill-small.ok {
      border-color: rgba(91,255,148,0.55);
      background: rgba(91,255,148,0.08);
      color: #bfffd5;
    }

    .pill-small.warn {
      border-color: rgba(255,200,87,0.55);
      background: rgba(255,200,87,0.08);
      color: #ffe2a8;
    }

    .pill-small.bad {
      border-color: rgba(255,91,125,0.60);
      background: rgba(255,91,125,0.08);
      color: #ffd7df;
    }

    /* BUTTONS */
    .edit-toggle-btn,
    .btn-primary,
    .btn-ghost {
      transition:
        background 0.18s ease,
        box-shadow 0.18s ease,
        transform 0.18s ease,
        border-color 0.18s ease;
    }

    .edit-toggle-btn {
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.24);
      background:
        linear-gradient(135deg, rgba(20,21,41,0.95), rgba(16,16,32,1));
      color: #f4f4fb;
      font-size: 11px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
      box-shadow: 0 8px 20px rgba(0,0,0,0.6);
    }

    .edit-toggle-btn:hover {
      transform: translateY(-1px);
      border-color: rgba(123,107,255,0.9);
      box-shadow: 0 12px 30px rgba(0,0,0,0.75);
    }

    .edit-toggle-btn.active {
      background: linear-gradient(135deg, #5b4bff, #7b6bff);
      border-color: transparent;
      box-shadow: 0 12px 30px rgba(0,0,0,0.8);
    }

    .btn-primary {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      border: 1px solid rgba(91,255,148,0.55);
      background: rgba(91,255,148,0.10);
      color: #d8ffe7;
      padding: 9px 12px;
      border-radius: 14px;
      font-size: 12px;
      cursor: pointer;
      text-decoration: none;
      width: fit-content;
    }
    .btn-primary:hover {
      transform: translateY(-1px);
      background: rgba(91,255,148,0.14);
      border-color: rgba(91,255,148,0.75);
      box-shadow: 0 12px 30px rgba(0,0,0,0.75);
    }

    .btn-ghost {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.03);
      color: var(--text-main);
      padding: 9px 12px;
      border-radius: 14px;
      font-size: 12px;
      cursor: pointer;
      text-decoration: none;
      width: fit-content;
    }
    .btn-ghost:hover {
      transform: translateY(-1px);
      background: rgba(255,255,255,0.05);
      border-color: rgba(255,255,255,0.16);
      box-shadow: 0 12px 30px rgba(0,0,0,0.75);
    }

    /* CONTENT */
    .content {
      display: flex;
      gap: 22px;
      padding: 22px;
      max-width: 1280px;
    }

    .main-column { flex: 1.9; display: flex; flex-direction: column; gap: 18px; }
    .side-column { flex: 1; max-width: 380px; display: flex; flex-direction: column; gap: 18px; }

    .card {
      background:
        radial-gradient(circle at top left, rgba(91,75,255,0.08), transparent 55%),
        linear-gradient(130deg, rgba(255,255,255,0.03), transparent 45%),
        var(--bg-card);
      border: 1px solid rgba(255,255,255,0.07);
      border-radius: var(--radius-lg);
      padding: 18px 20px;
      box-shadow:
        0 10px 30px rgba(0,0,0,.55),
        inset 0 1px 0 rgba(255,255,255,0.04);
      transition: 0.2s ease;
      animation: fadeInUp 0.2s ease-out;
    }

    .card:hover { box-shadow: 0 12px 34px rgba(0,0,0,.62); }

    .card-title { font-size: 15px; font-weight: 600; margin-bottom: 4px; }
    .card-sub { font-size: 12px; color: var(--text-soft); margin-bottom: 10px; }

    .card-title::after {
      content: "";
      display: block;
      width: 28px;
      height: 2px;
      margin-top: 6px;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--accent), transparent);
      opacity: 0.95;
    }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(4px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* PROFILE HEADER */
    .profile-header {
      display: flex;
      gap: 16px;
      align-items: flex-start;
    }

    .profile-avatar-block {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      min-width: 86px;
    }

    .profile-name {
      font-size: 18px;
      font-weight: 600;
      line-height: 1.15;
      word-break: break-word;
    }

    .profile-tagline {
      font-size: 12px;
      color: var(--text-soft);
      margin-top: 2px;
      line-height: 1.35;
    }

    .platform-row {
      margin-top: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: var(--text-soft);
      flex-wrap: wrap;
    }

    .platform-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 9px;
      border-radius: 999px;
      background: #141529;
      border: 1px solid var(--border-soft);
      font-size: 12px;
    }

    .platform-select {
      background: #141529;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      padding: 4px 24px 4px 8px;
      color: var(--text-soft);
      font-size: 11px;
      outline: none;
      cursor: pointer;
    }

    .profile-grid-meta {
      display: grid;
      grid-template-columns: repeat(3,minmax(0,1fr));
      gap: 10px;
      margin-top: 12px;
      font-size: 12px;
    }

    .meta-box {
      background:
        linear-gradient(145deg, rgba(255,255,255,0.02), transparent),
        #15172b;
      border-radius: 14px;
      padding: 10px;
      border: 1px solid var(--border-subtle);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.03);
    }

    .meta-label {
      font-size: 11px;
      color: var(--text-soft);
      margin-bottom: 2px;
    }

    .meta-value {
      font-size: 14px;
      font-weight: 600;
    }

    .about-text {
      font-size: 13px;
      color: var(--text-soft);
      line-height: 1.55;
    }

    /* SCHEDULE */
    .schedule-grid {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 4px;
      font-size: 12px;
    }

    .schedule-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      background: #15172b;
      border-radius: 14px;
      padding: 8px 10px;
      border: 1px solid var(--border-subtle);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.03);
    }

    .schedule-label { color: var(--text-soft); }

    .schedule-value {
      font-weight: 500;
      font-size: 12px;
      text-align: right;
      line-height: 1.25;
    }

    /* SIDE ‚Äì CARDS */
    .side-card {
      background:
        radial-gradient(circle at top left, rgba(91,75,255,0.08), transparent 55%),
        linear-gradient(130deg, rgba(255,255,255,0.03), transparent 45%),
        var(--bg-card);
      border: 1px solid rgba(255,255,255,0.07);
      border-radius: 18px;
      padding: 14px 16px;
      box-shadow:
        0 10px 30px rgba(0,0,0,.55),
        inset 0 1px 0 rgba(255,255,255,0.04);
      font-size: 12px;
      color: var(--text-soft);
    }

    .side-card-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 4px;
      color: #fff;
    }

    .social-grid {
      display: grid;
      grid-template-columns: repeat(2,minmax(0,1fr));
      gap: 8px;
      margin-top: 6px;
    }

    .social-card {
      background:
        linear-gradient(145deg, rgba(255,255,255,0.02), transparent),
        #15172b;
      border-radius: 14px;
      padding: 8px 9px;
      border: 1px solid var(--border-subtle);
      display: flex;
      flex-direction: column;
      gap: 3px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.03);
    }

    .social-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
    }

    .social-icon {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 13px;
      color: #fff;
    }

    .social-name { font-size: 11px; color: var(--text-soft); }

    .social-value { font-size: 13px; font-weight: 600; }

    .social-link {
      font-size: 11px;
      color: var(--accent-soft);
      text-decoration: none;
    }

    .social-link:hover { text-decoration: underline; }

    .timezone-row {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 12px;
    }

    .timezone-select {
      background: #141529;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      padding: 6px 26px 6px 10px;
      color: var(--text-soft);
      font-size: 12px;
      outline: none;
      cursor: pointer;
    }

    .side-note {
      margin-top: 8px;
      font-size: 11px;
      color: var(--text-soft);
      line-height: 1.35;
    }

    /* BASE DATA FORM */
    .form-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
      margin-top: 6px;
    }

    .form-label { font-size: 11px; color: var(--text-soft); }

    .form-input {
      background: #141529;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      padding: 6px 10px;
      font-size: 12px;
      color: var(--text-main);
      outline: none;
      transition: border-color .15s ease, box-shadow .15s ease;
    }

    .form-input::placeholder { color: var(--text-muted); }

    .form-input:focus {
      border-color: rgba(123,107,255,0.95);
      box-shadow: 0 0 0 3px rgba(91,75,255,0.12);
    }

    .save-btn {
      margin-top: 10px;
      width: 100%;
      padding: 7px 10px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #5b4bff, #7b6bff);
      color: #fff;
      font-size: 12px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      box-shadow: 0 10px 26px rgba(0,0,0,0.7);
      transition: transform .15s ease, box-shadow .15s ease;
    }

    .save-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.8);
    }

    .save-msg {
      margin-top: 6px;
      font-size: 11px;
      color: var(--text-soft);
      opacity: 0;
      transition: 0.2s ease;
    }

    .save-msg.visible { opacity: 1; }

    /* DEMO EDIT MODE */
    .editing [data-editable="true"] {
      position: relative;
      background: rgba(91,75,255,0.12);
      border-radius: 10px;
      padding: 2px 6px;
      transition: .15s ease;
    }

    .editing [data-editable="true"]:hover {
      box-shadow: 0 0 0 1px rgba(123,107,255,0.8);
      background: rgba(16,16,46,0.98);
      cursor: text;
    }

    .editing [data-editable="true"]::after {
      content: "‚úè";
      font-size: 10px;
      color: rgba(220,220,255,0.9);
      position: absolute;
      right: 6px;
      top: 4px;
      opacity: 0.8;
      pointer-events: none;
    }

    .editing-hint {
      display: none;
      margin-top: 10px;
      font-size: 11px;
      color: var(--text-soft);
      padding: 6px 10px;
      border-radius: 999px;
      background:
        linear-gradient(120deg, rgba(91,75,255,0.4), rgba(12,12,40,0.95));
      border: 1px solid rgba(123,107,255,0.9);
      align-items: center;
      gap: 6px;
    }

    .editing-hint-icon {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      background: rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 10px;
      color: #fff;
    }

    /* CAMPAIGN HISTORY */
    .campaign-history {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 6px;
      font-size: 12px;
    }

    .campaign-row {
      background:
        linear-gradient(145deg, rgba(255,255,255,0.02), transparent),
        #15172b;
      border-radius: 12px;
      padding: 8px 9px;
      border: 1px solid var(--border-subtle);
      display: flex;
      justify-content: space-between;
      gap: 8px;
      align-items: center;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.03);
    }

    .campaign-row-main {
      display: flex;
      flex-direction: column;
      gap: 2px;
      min-width: 0;
    }

    .campaign-name {
      font-size: 12px;
      font-weight: 500;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 520px;
    }

    .campaign-meta { font-size: 11px; color: var(--text-soft); }

    .campaign-status-pill {
      padding: 3px 9px;
      border-radius: 999px;
      font-size: 11px;
      border: 1px solid var(--success);
      color: var(--success);
      background: rgba(91,255,148,0.06);
      white-space: nowrap;
    }

    .campaign-status-pill.review {
      border-color: #ffc857;
      color: #ffc857;
      background: rgba(255,200,87,0.06);
    }

    /* EXPORT ‚Äì MINI MEDIA KIT (DEMO) */
    .export-row {
      margin-top: 10px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .divider-soft {
      height: 1px;
      width: 100%;
      background: rgba(255,255,255,0.06);
      margin: 12px 0;
      border-radius: 999px;
    }

    @media (max-width: 980px) {
      .sidebar { display:none; }
      .content { flex-direction: column; }
      .side-column { max-width: 100%; }
      .profile-grid-meta { grid-template-columns: repeat(2,minmax(0,1fr)); }
      .social-grid { grid-template-columns: repeat(2,minmax(0,1fr)); }
    }

    @media (max-width: 720px) {
      .profile-header { flex-direction: column; }
      .profile-grid-meta { grid-template-columns: 1fr; }
      .social-grid { grid-template-columns: 1fr; }
      .campaign-name { max-width: 100%; }
      .topbar { align-items: flex-start; }
      .topbar-right { justify-content: flex-start; text-align: left; }
    }
  </style>
</head>

<body>
<div class="app-shell">

  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="sidebar-logo">STREAM<span>LATAM</span></div>

    <div>
      <div class="sidebar-section-title">Navigation</div>
      <nav class="sidebar-nav">
        <div class="nav-item"><a href="dashboard.html">üè† Dashboard</a></div>
        <div class="nav-item"><a href="campaigns.html">üéØ Campaigns</a></div>
        <div class="nav-item"><a href="applications.html">üì© My applications</a></div>
      </nav>
    </div>

    <div>
      <div class="sidebar-section-title">Account</div>
      <nav class="sidebar-nav">
        <div class="nav-item active"><a href="profile.html">üßë‚Äçüíª Profile</a></div>
        <div class="nav-item">‚öôÔ∏è Settings</div>
      </nav>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main-area">

    <!-- TOPBAR -->
    <header class="topbar">
      <div class="topbar-left">
        <div class="avatar-circle-lg" id="topbarAvatar">F</div>
        <div style="min-width:0;">
          <div class="topbar-title" id="topbarTitle">Public profile for FrancoDota (demo)</div>
          <div class="topbar-sub" id="topbarSub">This is how your card could look when a brand opens your profile.</div>
        </div>
      </div>

      <div class="topbar-right">
        <span class="pill-small ok" id="dataPill"><i class="fa-solid fa-database"></i> Data synced</span>
        <button id="editToggle" class="edit-toggle-btn" type="button">
          <i class="fa-solid fa-pen-to-square"></i>
          Edit mode (demo)
        </button>
      </div>
    </header>

    <!-- CONTENT -->
    <section class="content">

      <!-- MAIN COLUMN -->
      <div class="main-column">

        <!-- PROFILE HEADER / SUMMARY -->
        <div class="card" id="profileCard">
          <div class="profile-header">
            <div class="profile-avatar-block">
              <div class="avatar-circle-lg" id="profileAvatar">F</div>
              <div style="font-size:11px;color:var(--text-soft);">LATAM streamer</div>
            </div>

            <div style="flex:1;min-width:0;">
              <div
                class="profile-name"
                id="displayName"
                contenteditable="false"
                data-editable="true"
              >
                FrancoDota
              </div>
              <div
                class="profile-tagline"
                data-editable="true"
                contenteditable="false"
                id="taglineText"
              >
                Dota streamer, chill chats, and a growing LATAM community.
              </div>

              <div class="platform-row">
                <span>Main platform:</span>
                <span class="platform-pill">
                  <i id="platformIcon" class="fa-brands fa-twitch"></i>
                  <span id="platformText">Twitch</span>
                </span>
                <select id="platformSelect" class="platform-select">
                  <option value="twitch" selected>Twitch</option>
                  <option value="youtube">YouTube</option>
                  <option value="kick">Kick</option>
                  <option value="trovo">Trovo</option>
                </select>

                <span class="pill-small" id="profileScorePill" style="margin-left:auto;">
                  <i class="fa-solid fa-signal"></i>
                  <span id="profileScoreText">Ready for small campaigns</span>
                </span>
              </div>

              <div class="profile-grid-meta">
                <div class="meta-box">
                  <div class="meta-label">Concurrent viewers (demo)</div>
                  <div
                    class="meta-value"
                    id="displayViewers"
                    contenteditable="false"
                    data-editable="true"
                  >
                    145
                  </div>
                </div>
                <div class="meta-box">
                  <div class="meta-label">Main categories</div>
                  <div
                    class="meta-value"
                    id="displayCategories"
                    contenteditable="false"
                    data-editable="true"
                  >
                    Dota 2 ¬∑ Just Chatting
                  </div>
                </div>
                <div class="meta-box">
                  <div class="meta-label">Region & language</div>
                  <div
                    class="meta-value"
                    id="displayRegion"
                    contenteditable="false"
                    data-editable="true"
                  >
                    LATAM (AR) ¬∑ Spanish
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div style="margin-top:14px;">
            <div class="card-sub" style="margin-bottom:4px;">About your channel</div>
            <div
              class="about-text"
              data-editable="true"
              contenteditable="false"
              id="aboutText"
            >
              Channel focused on tryhard Dota matches, live analysis, and relaxed community moments.
              Looking for sponsors that add value to the chat experience without breaking the stream‚Äôs vibe.
            </div>

            <div class="divider-soft"></div>

            <div class="card-sub" style="margin-bottom:6px;">Quick media kit (demo)</div>
            <div style="font-size:12px;color:var(--text-soft);line-height:1.45;">
              <span id="mkValueProp">
                Streamer with a loyal community‚Äîideal for awareness campaigns and LATAM brand activations.
              </span>
            </div>

            <div class="export-row">
              <button class="btn-primary" id="exportProfileMediaKitBtn" type="button">
                <i class="fa-solid fa-file-arrow-down"></i> Export media kit (demo)
              </button>
              <button class="btn-ghost" id="copyProfileMediaKitBtn" type="button">
                <i class="fa-solid fa-copy"></i> Copy text
              </button>
            </div>

            <div style="margin-top:8px;font-size:11px;color:var(--text-soft);">
              Demo export as .txt to showcase functionality. In production this could be a PDF.
            </div>
          </div>

          <div class="editing-hint" id="editHint" style="display:none;">
            <div class="editing-hint-icon"><i class="fa-solid fa-pen"></i></div>
            <span>Edit mode enabled (demo). You can adjust description, schedule, and social numbers.</span>
          </div>
        </div>

        <!-- SCHEDULE -->
        <div class="card" id="scheduleCard">
          <div class="card-title">Typical streaming schedule</div>
          <div class="card-sub">
            Make it clear when you‚Äôre most likely to be live (demo).
          </div>

          <div class="schedule-grid">
            <div class="schedule-row">
              <div class="schedule-label">Monday to Friday</div>
              <div
                class="schedule-value"
                data-editable="true"
                contenteditable="false"
                id="scheduleWeek"
              >
                20:00 ‚Äì 00:00 (ART)
              </div>
            </div>
            <div class="schedule-row">
              <div class="schedule-label">Saturdays</div>
              <div
                class="schedule-value"
                data-editable="true"
                contenteditable="false"
                id="scheduleSat"
              >
                Flexible streams ¬∑ afternoon / night
              </div>
            </div>
            <div class="schedule-row">
              <div class="schedule-label">Sundays</div>
              <div
                class="schedule-value"
                data-editable="true"
                contenteditable="false"
                id="scheduleSun"
              >
                Usually off ¬∑ announced on socials if there‚Äôs a special stream
              </div>
            </div>
          </div>

          <div style="margin-top:10px; font-size:11px; color: var(--text-soft); line-height:1.35;">
            Tip: when you save base data, your <b>schedule</b> is also saved so the dashboard can use it.
          </div>
        </div>

        <!-- CAMPAIGN HISTORY (DEMO) -->
        <div class="card">
          <div class="card-title">Campaign history (demo)</div>
          <div class="card-sub">
            A quick view of collaborations you‚Äôve done (or could show) to future brands.
          </div>

          <div class="campaign-history">
            <div class="campaign-row">
              <div class="campaign-row-main">
                <div class="campaign-name">Headset Pro LATAM ¬∑ On-stream mention</div>
                <div class="campaign-meta">
                  Hardware ¬∑ 1 stream ¬∑ Mention + panel
                </div>
              </div>
              <span class="campaign-status-pill">Completed</span>
            </div>

            <div class="campaign-row">
              <div class="campaign-row-main">
                <div class="campaign-name">EnergyDrink Rush ¬∑ Gamer bundle</div>
                <div class="campaign-meta">
                  Energy drinks ¬∑ Weekend activation
                </div>
              </div>
              <span class="campaign-status-pill">Completed</span>
            </div>

            <div class="campaign-row">
              <div class="campaign-row-main">
                <div class="campaign-name">LATAM Finance App ¬∑ Mention + panel</div>
                <div class="campaign-meta">
                  Fintech ¬∑ Monthly campaign ¬∑ CTA on stream
                </div>
              </div>
              <span class="campaign-status-pill review">In review</span>
            </div>
          </div>

          <div style="margin-top:8px;font-size:11px;color:var(--text-soft);">
            In a functional version, this block would update automatically based on the campaigns you complete.
          </div>
        </div>

      </div>

      <!-- SIDE COLUMN -->
      <aside class="side-column">

        <!-- CHANNEL BASE DATA -->
        <div class="side-card">
          <div class="side-card-title">Channel base data (demo)</div>
          <p style="font-size:11px;color:var(--text-soft);margin-bottom:6px;">
            This is saved in <b>localStorage</b> under <code>streamerBaseData</code> and powers the dashboard + public profile.
          </p>
          <form id="baseDataForm">
            <div class="form-group">
              <label class="form-label" for="inputName">Channel name</label>
              <input
                class="form-input"
                id="inputName"
                type="text"
                placeholder="Your Twitch name"
              />
            </div>

            <div class="form-group">
              <label class="form-label" for="inputViewers">Average viewers</label>
              <input
                class="form-input"
                id="inputViewers"
                type="number"
                min="0"
                placeholder="e.g., 120"
              />
            </div>

            <div class="form-group">
              <label class="form-label" for="inputCategories">Main categories</label>
              <input
                class="form-input"
                id="inputCategories"
                type="text"
                placeholder="e.g., Dota 2 ¬∑ Just Chatting"
              />
            </div>

            <div class="form-group">
              <label class="form-label" for="inputRegion">Region / language</label>
              <input
                class="form-input"
                id="inputRegion"
                type="text"
                placeholder="e.g., LATAM (AR) ¬∑ Spanish"
              />
            </div>

            <div class="form-group">
              <label class="form-label" for="inputTagline">Tagline (1 line)</label>
              <input
                class="form-input"
                id="inputTagline"
                type="text"
                placeholder="e.g., Dota + chill chats + LATAM community"
              />
            </div>

            <button type="submit" class="save-btn" id="saveBaseBtn">
              <i class="fa-solid fa-floppy-disk"></i>
              Save / update
            </button>

            <div id="baseDataSaved" class="save-msg">
              Saved (demo).
            </div>
          </form>

          <div style="margin-top:10px;font-size:11px;color:var(--text-soft);">
            Tip: if you change viewers, the ‚Äúsponsor readiness level‚Äù updates automatically.
          </div>
        </div>

        <!-- SOCIALS -->
        <div class="side-card">
          <div class="side-card-title">Connected socials (demo)</div>
          <p>This helps brands validate your reach beyond Twitch.</p>

          <div class="social-grid">

            <div class="social-card" data-social="instagram">
              <div class="social-top">
                <div class="social-icon" style="background:#e1306c;">
                  <i class="fa-brands fa-instagram"></i>
                </div>
                <div class="social-name">Instagram</div>
              </div>
              <div class="social-value" data-editable="true" contenteditable="false" data-social-value="instagram">
                3.2K followers
              </div>
              <a href="https://instagram.com/youruser" target="_blank" class="social-link" data-social-link="instagram">
                View profile
              </a>
            </div>

            <div class="social-card" data-social="tiktok">
              <div class="social-top">
                <div class="social-icon" style="background:#ff0050;">
                  <i class="fa-brands fa-tiktok"></i>
                </div>
                <div class="social-name">TikTok</div>
              </div>
              <div class="social-value" data-editable="true" contenteditable="false" data-social-value="tiktok">
                8.7K followers
              </div>
              <a href="https://tiktok.com/@youruser" target="_blank" class="social-link" data-social-link="tiktok">
                View profile
              </a>
            </div>

            <div class="social-card" data-social="youtube">
              <div class="social-top">
                <div class="social-icon" style="background:#ff0000;">
                  <i class="fa-brands fa-youtube"></i>
                </div>
                <div class="social-name">YouTube</div>
              </div>
              <div class="social-value" data-editable="true" contenteditable="false" data-social-value="youtube">
                1.1K subscribers
              </div>
              <a href="https://youtube.com/@youruser" target="_blank" class="social-link" data-social-link="youtube">
                View channel
              </a>
            </div>

            <div class="social-card" data-social="x">
              <div class="social-top">
                <div class="social-icon" style="background:#1d9bf0;">
                  <i class="fa-brands fa-x-twitter"></i>
                </div>
                <div class="social-name">X (Twitter)</div>
              </div>
              <div class="social-value" data-editable="true" contenteditable="false" data-social-value="x">
                950 followers
              </div>
              <a href="https://x.com/youruser" target="_blank" class="social-link" data-social-link="x">
                View account
              </a>
            </div>

          </div>

          <div class="side-note">
            In the future, you could choose which socials to show first
            (or hide) depending on the campaign type.
          </div>
        </div>

        <!-- TIMEZONE + BRAND NOTE -->
        <div class="side-card">
          <div class="side-card-title">Timezone & context</div>
          <p>This helps coordinate campaigns, launches, and key time windows.</p>

          <div class="timezone-row">
            <span>Main timezone:</span>
            <select id="timezoneSelect" class="timezone-select">
              <option value="ART" selected>ART ‚Äì Argentina / Uruguay</option>
              <option value="BRT">BRT ‚Äì Brazil (S√£o Paulo)</option>
              <option value="CLT">CLT ‚Äì Chile</option>
              <option value="PET">PET ‚Äì Peru</option>
              <option value="CST">CST ‚Äì Mexico / Central America</option>
            </select>
          </div>

          <div class="side-note">
            In a functional version, this would sync to your account
            and also be used to recommend activation time slots.
          </div>
        </div>

      </aside>

    </section>
  </main>
</div>

<script>
  // -----------------------------
  // Goal: save canonical object under localStorage["streamerBaseData"]
  // PLUS legacy aliases so older pages still update.
  // -----------------------------

  const STREAMER_BASE_KEY = "streamerBaseData";

  function safeJsonParse(str) {
    try { return JSON.parse(str); } catch { return null; }
  }

  function safeNum(v) {
    const n = Number(v);
    return Number.isFinite(n) ? n : null;
  }

  function parseViewersLoose(v) {
    if (v == null) return null;
    const cleaned = String(v).replace(/[^\d]/g, "");
    if (!cleaned) return null;
    const n = parseInt(cleaned, 10);
    return Number.isFinite(n) ? n : null;
  }

  function splitRegionLanguage(str) {
    // Accept: "LATAM (AR) ¬∑ Espa√±ol" OR "LATAM - Espa√±ol" OR "LATAM | Espa√±ol"
    const s = (str || "").trim();
    if (!s) return { region: "LATAM", language: "Spanish" };

    const parts = s.split(/¬∑|\||-|‚Äî/).map(x => x.trim()).filter(Boolean);
    if (parts.length >= 2) {
      return { region: parts[0], language: parts.slice(1).join(" ¬∑ ") };
    }
    return { region: parts[0], language: "Spanish" };
  }

  function normalizeCategories(input) {
    const raw = (input || "").trim();
    if (!raw) return [];
    return raw
      .split(/¬∑|,|\/|\||;/)
      .map(x => x.trim())
      .filter(Boolean)
      .slice(0, 6);
  }

  function fmtUpdated(ts) {
    if (!ts) return "‚Äî";
    try {
      const d = new Date(ts);
      if (isNaN(d.getTime())) return "‚Äî";
      return d.toLocaleString(undefined, { month:"short", day:"2-digit", hour:"2-digit", minute:"2-digit" });
    } catch { return "‚Äî"; }
  }

  function calcSponsorLevel(viewersNum) {
    if ((viewersNum ?? 0) < 50) {
      return {
        level: "low",
        label: "Early stage",
        mk: "Growing streamer with a close community. Ideal for local tests and simple activations."
      };
    }
    if ((viewersNum ?? 0) < 120) {
      return {
        level: "mid",
        label: "Ready for small campaigns",
        mk: "Streamer with real traction. Ideal for awareness and light performance with a loyal LATAM audience."
      };
    }
    if ((viewersNum ?? 0) < 250) {
      return {
        level: "mid",
        label: "Strong for niche sponsors",
        mk: "Stable niche audience. Ideal for goal-driven campaigns (clicks/signups) and sustained presence."
      };
    }
    return {
      level: "high",
      label: "Very attractive for serious sponsors",
      mk: "Scale + consistency. Ideal for monthly deals, integrations, and structured campaigns."
    };
  }

  function downloadTextFile(filename, text) {
    const blob = new Blob([text], { type: "text/plain;charset=utf-8" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);
  }

  function buildMediaKitText(payload) {
    return [
      "STREAMLATAM ‚Äî MEDIA KIT (DEMO)",
      "-----------------------------",
      `Channel: ${payload.name}`,
      `Platform: ${payload.platformLabel}`,
      `Average viewers: ${payload.viewers} concurrent`,
      `Categories: ${payload.categories}`,
      `Region / Language: ${payload.region} ¬∑ ${payload.language}`,
      `Timezone: ${payload.timezone}`,
      `Schedule: ${payload.schedule}`,
      "",
      "Value proposition:",
      payload.valueProp,
      "",
      "Contact:",
      "Franco Quiroz ‚Äî fq162162@gmail.com"
    ].join("\n");
  }

  // --- Platform config (icon + label) ---
  const platformSelect = document.getElementById("platformSelect");
  const platformIcon = document.getElementById("platformIcon");
  const platformText = document.getElementById("platformText");

  const PLATFORM_CONFIG = {
    twitch: { icon: "fa-brands fa-twitch", label: "Twitch" },
    youtube: { icon: "fa-brands fa-youtube", label: "YouTube" },
    kick: { icon: "fa-brands fa-kickstarter-k", label: "Kick" },
    trovo: { icon: "fa-solid fa-play", label: "Trovo" }
  };

  function applyPlatform(val) {
    const cfg = PLATFORM_CONFIG[val] || PLATFORM_CONFIG.twitch;
    if (platformIcon) platformIcon.className = cfg.icon;
    if (platformText) platformText.textContent = cfg.label;
    return cfg;
  }

  // --- Timezone mapping (legacy-friendly display) ---
  const TZ_LABEL = {
    ART: "UTC-3",
    BRT: "UTC-3",
    CLT: "UTC-4",
    PET: "UTC-5",
    CST: "UTC-6"
  };

  function tzToLegacyLabel(tz) {
    const key = String(tz || "").trim();
    return TZ_LABEL[key] || key || "UTC-3";
  }

  // --- Social helpers ---
  function collectSocialsFromCards() {
    const values = {};
    document.querySelectorAll("[data-social-value]").forEach(el => {
      const k = el.getAttribute("data-social-value");
      if (!k) return;
      values[k] = (el.textContent || "").trim();
    });

    const links = {};
    document.querySelectorAll("[data-social-link]").forEach(a => {
      const k = a.getAttribute("data-social-link");
      if (!k) return;
      links[k] = (a.getAttribute("href") || "").trim();
    });

    return {
      instagram: values.instagram || "",
      tiktok: values.tiktok || "",
      youtube: values.youtube || "",
      x: values.x || "",
      links
    };
  }

  function applySocialsToCards(socials) {
    if (!socials || typeof socials !== "object") return;

    const map = {
      instagram: socials.instagram,
      tiktok: socials.tiktok,
      youtube: socials.youtube,
      x: socials.x
    };

    Object.keys(map).forEach(k => {
      const el = document.querySelector(`[data-social-value="${k}"]`);
      if (el && map[k]) el.textContent = map[k];
    });

    const links = socials.links || {};
    Object.keys(links).forEach(k => {
      const a = document.querySelector(`[data-social-link="${k}"]`);
      if (a && links[k]) a.setAttribute("href", links[k]);
    });
  }

  // --- UI nodes ---
  const dataPill = document.getElementById("dataPill");
  const topbarAvatar = document.getElementById("topbarAvatar");
  const topbarTitle = document.getElementById("topbarTitle");
  const topbarSub = document.getElementById("topbarSub");
  const profileAvatar = document.getElementById("profileAvatar");

  const displayNameEl = document.getElementById("displayName");
  const displayViewersEl = document.getElementById("displayViewers");
  const displayCategoriesEl = document.getElementById("displayCategories");
  const displayRegionEl = document.getElementById("displayRegion");
  const taglineTextEl = document.getElementById("taglineText");

  const profileScorePill = document.getElementById("profileScorePill");
  const profileScoreText = document.getElementById("profileScoreText");
  const mkValueProp = document.getElementById("mkValueProp");

  const timezoneSelectEl = document.getElementById("timezoneSelect");

  const scheduleWeekEl = document.getElementById("scheduleWeek");
  const scheduleSatEl = document.getElementById("scheduleSat");
  const scheduleSunEl = document.getElementById("scheduleSun");

  function syncNameToAvatars(name) {
    const n = (name || "S").trim();
    const initial = n.charAt(0).toUpperCase() || "S";
    if (topbarAvatar) topbarAvatar.textContent = initial;
    if (profileAvatar) profileAvatar.textContent = initial;
    if (topbarTitle) topbarTitle.textContent = `Public profile for ${n} (demo)`;
  }

  function setDataPillState(state, updatedAt) {
    if (!dataPill) return;
    dataPill.classList.remove("ok","warn","bad");
    dataPill.classList.add(state);

    const updatedTxt = updatedAt ? ` ¬∑ ${fmtUpdated(updatedAt)}` : "";
    if (state === "ok") dataPill.innerHTML = `<i class="fa-solid fa-database"></i> Data synced${updatedTxt}`;
    if (state === "warn") dataPill.innerHTML = `<i class="fa-solid fa-triangle-exclamation"></i> Partial data${updatedTxt}`;
    if (state === "bad") dataPill.innerHTML = `<i class="fa-solid fa-circle-xmark"></i> No data${updatedTxt}`;
  }

  function buildScheduleString() {
    const week = (scheduleWeekEl?.textContent || "").trim();
    const sat = (scheduleSatEl?.textContent || "").trim();
    const sun = (scheduleSunEl?.textContent || "").trim();

    const parts = [];
    if (week) parts.push(`Mon‚ÄìFri ¬∑ ${week}`);
    if (sat) parts.push(`Sat ¬∑ ${sat}`);
    if (sun) parts.push(`Sun ¬∑ ${sun}`);
    return parts.join(" | ");
  }

  function getDefaultBase() {
    const name = (displayNameEl?.textContent || "Your channel").trim();
    const viewers = parseViewersLoose(displayViewersEl?.textContent || "") ?? 0;
    const categoriesStr = (displayCategoriesEl?.textContent || "").trim();
    const regionLangStr = (displayRegionEl?.textContent || "").trim();
    const rl = splitRegionLanguage(regionLangStr);

    const platform = platformSelect ? platformSelect.value : "twitch";
    const timezone = timezoneSelectEl ? timezoneSelectEl.value : "ART";
    const tagline = (taglineTextEl?.textContent || "").trim();

    const categories = normalizeCategories(categoriesStr);
    return {
      displayName: name,
      handle: name.replace(/\s+/g, ""),
      platform,
      region: rl.region || "LATAM",
      language: rl.language || "Spanish",
      avgViewers: viewers,
      categories,
      category: categories[0] || (categoriesStr ? categoriesStr.split("¬∑")[0].trim() : ""),
      schedule: buildScheduleString() || "‚Äî",
      timezone,
      tagline,
      socials: collectSocialsFromCards(),
      updatedAt: null
    };
  }

  function loadStreamerBaseData() {
    const raw = safeJsonParse(localStorage.getItem(STREAMER_BASE_KEY));
    if (!raw || typeof raw !== "object") return null;

    const def = getDefaultBase();

    const displayName = (raw.displayName || raw.channelName || raw.name || def.displayName || "").toString().trim();
    const platform = (raw.platform || def.platform || "twitch").toString().trim();

    const avgViewers =
      safeNum(raw.avgViewers) ??
      safeNum(raw.viewersAvg) ??
      safeNum(raw.viewers) ??
      parseViewersLoose(raw.viewers) ??
      def.avgViewers;

    const cats =
      Array.isArray(raw.categories) ? raw.categories :
      normalizeCategories(raw.categories || def.categories.join(" ¬∑ "));

    const region = (raw.region || "").toString().trim() || def.region;
    const language = (raw.language || "").toString().trim() || def.language;

    const schedule = (raw.schedule || def.schedule || "‚Äî").toString();
    const timezone = (raw.timezone || def.timezone || "ART").toString();
    const tagline = (raw.tagline || def.tagline || "").toString();
    const updatedAt = raw.updatedAt || raw.lastUpdated || null;

    const socials = (raw.socials && typeof raw.socials === "object") ? raw.socials : def.socials;

    return {
      displayName,
      handle: (raw.handle || raw.channelHandle || displayName.replace(/\s+/g, "")).toString(),
      platform,
      region,
      language,
      avgViewers: avgViewers ?? 0,
      categories: cats.filter(Boolean).slice(0, 6),
      category: (raw.category || cats[0] || "").toString(),
      schedule,
      timezone,
      tagline,
      socials,
      updatedAt
    };
  }

  function saveStreamerBaseData(obj) {
    const socials = obj.socials && typeof obj.socials === "object" ? obj.socials : collectSocialsFromCards();

    const out = {
      ...obj,
      avgViewers: Number(obj.avgViewers || 0),
      categories: Array.isArray(obj.categories) ? obj.categories : [],
      category: (obj.category || (obj.categories && obj.categories[0]) || "").toString(),
      socials,
      updatedAt: new Date().toISOString()
    };

    // ---- LEGACY ALIASES (so old pages still update) ----
    out.name = out.displayName;                       // old
    out.channelName = out.displayName;                // sometimes used
    out.viewers = out.avgViewers;                     // old
    out.viewersAvg = out.avgViewers;                  // sometimes used
    out.timezoneLabel = tzToLegacyLabel(out.timezone);// for UIs that expect UTC-*
    // ---------------------------------------------------

    localStorage.setItem(STREAMER_BASE_KEY, JSON.stringify(out));
    return out;
  }

  function computeCompleteness(obj) {
    const required = [
      ["displayName", obj.displayName],
      ["platform", obj.platform],
      ["avgViewers", obj.avgViewers],
      ["region", obj.region],
      ["language", obj.language],
      ["schedule", obj.schedule],
      ["categories", (obj.categories && obj.categories.length) ? "ok" : ""]
    ];
    const isFilled = (v) => v !== null && v !== undefined && String(v).trim() !== "" && String(v).trim() !== "‚Äî";
    const filled = required.filter(([,v]) => isFilled(v)).length;
    return Math.round((filled / required.length) * 100);
  }

  function applyToUIFromBase(obj) {
    if (displayNameEl) displayNameEl.textContent = obj.displayName || "‚Äî";
    if (displayViewersEl) displayViewersEl.textContent = String(obj.avgViewers ?? 0);
    if (displayCategoriesEl) displayCategoriesEl.textContent = (obj.categories || []).join(" ¬∑ ") || "‚Äî";
    if (displayRegionEl) displayRegionEl.textContent = `${obj.region || "‚Äî"} ¬∑ ${obj.language || "‚Äî"}`;
    if (taglineTextEl && obj.tagline) taglineTextEl.textContent = obj.tagline;

    // platform
    if (platformSelect && obj.platform) {
      platformSelect.value = obj.platform;
      applyPlatform(obj.platform);
    } else {
      applyPlatform(platformSelect ? platformSelect.value : "twitch");
    }

    // timezone
    if (timezoneSelectEl && obj.timezone) timezoneSelectEl.value = obj.timezone;

    // socials (make sure edits reflect when reloading)
    applySocialsToCards(obj.socials);

    // sponsor UI
    const lvl = calcSponsorLevel(Number(obj.avgViewers || 0));
    if (profileScorePill) {
      profileScorePill.classList.remove("ok","warn");
      if (lvl.level === "low") profileScorePill.classList.add("warn");
      else profileScorePill.classList.add("ok");
    }
    if (profileScoreText) profileScoreText.textContent = lvl.label;
    if (mkValueProp) mkValueProp.textContent = lvl.mk;

    // topbar
    syncNameToAvatars(obj.displayName);

    // data pill
    const pct = computeCompleteness(obj);
    if (pct >= 80) setDataPillState("ok", obj.updatedAt);
    else if (pct >= 50) setDataPillState("warn", obj.updatedAt);
    else setDataPillState("bad", obj.updatedAt);
  }

  // ------------------ Edit mode ------------------
  const editToggle = document.getElementById("editToggle");
  const profileCard = document.getElementById("profileCard");
  const editHint = document.getElementById("editHint");
  const editableNodes = document.querySelectorAll("[data-editable='true']");
  let isEditing = false;

  if (editToggle) {
    editToggle.addEventListener("click", () => {
      isEditing = !isEditing;
      editToggle.classList.toggle("active", isEditing);
      profileCard.classList.toggle("editing", isEditing);
      document.body.classList.toggle("editing", isEditing);

      editableNodes.forEach(node => {
        node.contentEditable = isEditing ? "true" : "false";
      });

      if (editHint) editHint.style.display = isEditing ? "flex" : "none";

      if (isEditing) {
        editToggle.innerHTML = '<i class="fa-solid fa-check"></i> Editing (demo)';
        if (topbarSub) topbarSub.textContent = "Edit your profile and save base data so the dashboard updates.";
      } else {
        editToggle.innerHTML = '<i class="fa-solid fa-pen-to-square"></i> Edit mode (demo)';
        if (topbarSub) topbarSub.textContent = "This is how your card could look when a brand opens your profile.";
      }
    });
  }

  // Keep avatars in sync on manual edits (no autosave)
  if (displayNameEl) {
    displayNameEl.addEventListener("input", () => {
      syncNameToAvatars((displayNameEl.textContent || "").trim());
    });
  }

  // ------------------ Base data form -> streamerBaseData ------------------
  const baseForm = document.getElementById("baseDataForm");

  function fillFormFromBase(obj) {
    const inputName = document.getElementById("inputName");
    const inputViewers = document.getElementById("inputViewers");
    const inputCategories = document.getElementById("inputCategories");
    const inputRegion = document.getElementById("inputRegion");
    const inputTagline = document.getElementById("inputTagline");

    if (inputName) inputName.value = obj.displayName || "";
    if (inputViewers) inputViewers.value = String(obj.avgViewers ?? "");
    if (inputCategories) inputCategories.value = (obj.categories || []).join(" ¬∑ ");
    if (inputRegion) inputRegion.value = `${obj.region || ""} ¬∑ ${obj.language || ""}`.trim();
    if (inputTagline) inputTagline.value = obj.tagline || "";
  }

  function readFormToBase() {
    const inputName = document.getElementById("inputName");
    const inputViewers = document.getElementById("inputViewers");
    const inputCategories = document.getElementById("inputCategories");
    const inputRegion = document.getElementById("inputRegion");
    const inputTagline = document.getElementById("inputTagline");

    const def = getDefaultBase();

    const displayName = (inputName?.value || "").trim() || def.displayName;
    const avgViewers = safeNum(inputViewers?.value) ?? parseViewersLoose(inputViewers?.value) ?? def.avgViewers;

    const cats = normalizeCategories((inputCategories?.value || "").trim());
    const rl = splitRegionLanguage((inputRegion?.value || "").trim());

    const platform = platformSelect ? platformSelect.value : def.platform;
    const timezone = timezoneSelectEl ? timezoneSelectEl.value : def.timezone;
    const tagline = (inputTagline?.value || "").trim();

    const socials = collectSocialsFromCards();

    return {
      displayName,
      handle: displayName.replace(/\s+/g, ""),
      platform,
      region: rl.region || def.region,
      language: rl.language || def.language,
      avgViewers: Number(avgViewers || 0),
      categories: cats,
      category: cats[0] || "",
      schedule: buildScheduleString() || def.schedule,
      timezone,
      tagline,
      socials
    };
  }

  if (platformSelect) {
    platformSelect.addEventListener("change", () => {
      applyPlatform(platformSelect.value);
      const current = loadStreamerBaseData() || getDefaultBase();
      const saved = saveStreamerBaseData({ ...current, platform: platformSelect.value });
      applyToUIFromBase(saved);
    });
  }

  if (timezoneSelectEl) {
    timezoneSelectEl.addEventListener("change", () => {
      const current = loadStreamerBaseData() || getDefaultBase();
      const saved = saveStreamerBaseData({ ...current, timezone: timezoneSelectEl.value });
      applyToUIFromBase(saved);
    });
  }

  // Save schedule updates on blur
  [scheduleWeekEl, scheduleSatEl, scheduleSunEl].forEach(el => {
    if (!el) return;
    el.addEventListener("blur", () => {
      const current = loadStreamerBaseData() || getDefaultBase();
      const saved = saveStreamerBaseData({ ...current, schedule: buildScheduleString() });
      applyToUIFromBase(saved);
    });
  });

  // Save socials edits on blur (so you don‚Äôt need the base form)
  document.querySelectorAll("[data-social-value]").forEach(el => {
    el.addEventListener("blur", () => {
      const current = loadStreamerBaseData() || getDefaultBase();
      const saved = saveStreamerBaseData({ ...current, socials: collectSocialsFromCards() });
      applyToUIFromBase(saved);
    });
  });

  if (baseForm) {
    const savedMsg = document.getElementById("baseDataSaved");

    baseForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const obj = readFormToBase();
      const saved = saveStreamerBaseData(obj);
      applyToUIFromBase(saved);

      if (savedMsg) {
        savedMsg.classList.add("visible");
        setTimeout(() => savedMsg.classList.remove("visible"), 2000);
      }
    });
  }

  // ------------------ Export / Copy Media Kit (demo) ------------------
  const exportBtn = document.getElementById("exportProfileMediaKitBtn");
  const copyBtn = document.getElementById("copyProfileMediaKitBtn");

  function collectMediaKitPayload() {
    const base = loadStreamerBaseData() || getDefaultBase();
    const platformVal = base.platform || (platformSelect ? platformSelect.value : "twitch");
    const platformCfg = applyPlatform(platformVal);

    return {
      name: (base.displayName || "Streamer").trim(),
      viewers: String(base.avgViewers ?? 0),
      categories: (base.categories || []).join(" ¬∑ ") || "‚Äî",
      region: base.region || "‚Äî",
      language: base.language || "‚Äî",
      timezone: base.timezone || (timezoneSelectEl ? timezoneSelectEl.value : "ART"),
      schedule: base.schedule || buildScheduleString() || "‚Äî",
      platformLabel: platformCfg.label,
      valueProp: (document.getElementById("mkValueProp")?.textContent || "").trim()
    };
  }

  if (exportBtn) {
    exportBtn.addEventListener("click", () => {
      const payload = collectMediaKitPayload();
      const txt = buildMediaKitText(payload);
      downloadTextFile(`media-kit-${(payload.name || "streamer").toLowerCase()}.txt`, txt);
    });
  }

  if (copyBtn) {
    copyBtn.addEventListener("click", async () => {
      const payload = collectMediaKitPayload();
      const txt = buildMediaKitText(payload);

      try {
        await navigator.clipboard.writeText(txt);
        copyBtn.innerHTML = `<i class="fa-solid fa-check"></i> Copied`;
        setTimeout(() => copyBtn.innerHTML = `<i class="fa-solid fa-copy"></i> Copy text`, 1200);
      } catch {
        const ta = document.createElement("textarea");
        ta.value = txt;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        ta.remove();
        copyBtn.innerHTML = `<i class="fa-solid fa-check"></i> Copied`;
        setTimeout(() => copyBtn.innerHTML = `<i class="fa-solid fa-copy"></i> Copy text`, 1200);
      }
    });
  }

  // ------------------ INIT ------------------
  (function init() {
    let base = loadStreamerBaseData();
    if (!base) {
      const seeded = saveStreamerBaseData(getDefaultBase());
      base = seeded;
    } else {
      if (!base.updatedAt) base = saveStreamerBaseData(base);
      else base = saveStreamerBaseData(base); // ensures legacy aliases exist after upgrade
    }

    applyToUIFromBase(base);
    fillFormFromBase(base);
    syncNameToAvatars(base.displayName);
    applyPlatform(base.platform || (platformSelect ? platformSelect.value : "twitch"));
  })();
</script>

</body>
</html>
